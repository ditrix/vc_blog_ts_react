# JOURNAL.md

## [2026-01-18] Рефакторинг правил проекта

### 1. Постановка задачи
- Обновить структуру файла `.cursor/rules/1-common.md` согласно современным стандартам (MDC).
- Переосмыслить процесс решения задач (замена RLM на выбор из двух решений + Self-Review).
- Настроить хранение документации в `./cursor/docs/JOURNAL.md`.

### 2. Выполнение
- Создана папка `.cursor/docs/` и файл `JOURNAL.md`.
- Файл `1-common.md` переписан в формате MDC (YAML frontmatter + Markdown).
- Внедрен новый алгоритм работы:
    - Минимум 3 вопроса.
    - Сравнение двух стратегий.
    - Self-review.
    - Автоматическая фиксация в журнале.
- Удалены устаревшие требования (RLM).

### 3. Статус
✅ Завершено

## [2026-01-18] Реализация админ-панели /adm

### 1. Постановка задачи
- Создать защищенный раздел `/adm` для управления блогом.
- Реализовать легковесную авторизацию (JWT + Cookies).
- Функционал: CRUD статей (с флагом публикации), модерация комментариев, смена пароля.
- Стиль: iOS UI/UX.
- БД: Каскадное удаление комментариев при удалении поста.

### 2. Выполнение
- **Архитектура**: Использован `jose` для JWT, Next.js Middleware для защиты роутов.
- **БД**: Обновлена схема Prisma (добавлена модель User, поле `published` в Post/Comment, `onDelete: Cascade`).
- **UI**: Создан адаптивный Sidebar, iOS-style переключатели (toggle), стеклянные эффекты.
- **Логика**: Все действия реализованы через Server Actions. Публичная часть теперь фильтрует неопубликованный контент.

### 3. Статус
✅ Завершено

## [2026-01-18] Расширение админки: Редактор и Медиа

### 1. Постановка задачи
- Внедрить текстовый редактор (TipTap).
- Реализовать загрузку изображений с Drag-n-Drop.
- Автоматический ресайз (low/middle/original) через Sharp.
- Физическое удаление файлов при удалении постов.
- iOS стилизация всех новых элементов.

### 2. Выполнение
- **Редактор**: Интегрирован TipTap с панелью инструментов над текстом. Стилизован под iOS.
- **Медиа**: Создана утилита `lib/images.ts`. При загрузке генерируются 3 версии `.webp`.
- **UI**: В админке добавлен Drag-n-Drop компонент. В публичной части реализовано отображение обложек с эффектом параллакса/зума при наведении.
- **Логика**: Обновлены Server Actions для обработки файлов и очистки диска.

### 3. Статус
✅ Завершено

## [2026-01-18] Ребрендинг: Neo-Brutalism UI & Документация

### 1. Постановка задачи
- Полностью переделать фронтенд в стиле необрутализма.
- Создать полноценную документацию `README.md`.
- Обновить все компоненты под новый стиль (Header, Cards, Buttons, Inputs).

### 2. Выполнение
- **UI/UX**: Внедрена высококонтрастная тема с толстыми черными границами (4px) и жесткими тенями (8px). Использованы яркие акценты (Yellow, Cyan, Pink).
- **Компоненты**: Все элементы переведены на прямоугольные формы без скруглений. Добавлен эффект "нажатия" (neo-press).
- **Документация**: Написан `README.md` с описанием стека, функций и инструкцией по развертыванию.

### 3. Статус
✅ Завершено

## [2026-01-18] Очистка Git индекса от артефактов Next.js

### 1. Постановка задачи
- Удалить файлы .next/cache/*.gz и другие артефакты сборки из индекса Git.
- Убедиться, что папка .next/ правильно игнорируется.

### 2. Выполнение
- **Анализ**: Выбрана стратегия полного удаления папки .next/ из индекса, так как она уже прописана в .gitignore.
- **Действие**: Выполнена команда git rm -r --cached .next/.
- **Результат**: 126 файлов (включая .gz кэши) удалены из отслеживания Git. Создан коммит.

### 3. Статус
✅ Завершено

## [2026-01-18] Очистка Git индекса от .DS_Store

### 1. Постановка задачи
- Удалить файлы .DS_Store из индекса Git, чтобы они начали игнорироваться согласно .gitignore.

### 2. Выполнение
- **Анализ**: Файлы .DS_Store отслеживались Git, поэтому правила игнорирования не работали.
- **Действие**: Выполнена команда git rm --cached .DS_Store.
- **Результат**: Файл удален из индекса, изменения зафиксированы в коммите.

### 3. Status
✅ Завершено

## [2026-01-18] Рефакторинг промта "Админка - Редактор"

### 1. Постановка задачи
- Отформатировать файл промта .cursor/promts/2-admin-editor- согласно стандартам MDC.
- Улучшить структуру, добавить технические подробности и эмодзи.

### 2. Выполнение
- **Анализ**: Промт переведен в формат MDC с YAML фронтматтером.
- **Детали**: Добавлены рекомендации по библиотекам (TipTap), уточнены требования к UI (iOS Style) и логике хранения изображений.
- **Результат**: Файл стал более читаемым для ИИ и содержит четкие границы ответственности (globs).

### 3. Статус
✅ Завершено
